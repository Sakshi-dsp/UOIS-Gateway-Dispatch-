# Server Configuration
SERVER_PORT=8080
SERVER_HOST=localhost
SERVER_READ_TIMEOUT=30s
SERVER_WRITE_TIMEOUT=30s

# PostgreSQL-E (Audit Database) Configuration
POSTGRES_E_HOST=localhost
POSTGRES_E_PORT=5432
POSTGRES_E_USER=uois_gateway
POSTGRES_E_PASSWORD=
POSTGRES_E_DB=postgres_audit
POSTGRES_E_SSL_MODE=require
POSTGRES_E_MAX_CONNECTIONS=25
POSTGRES_E_MAX_IDLE_CONNECTIONS=5
POSTGRES_E_CONNECTION_MAX_LIFETIME=5m

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TLS=false
REDIS_KEY_PREFIX=uois-gateway
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5

# Order Service gRPC
ORDER_SERVICE_GRPC_HOST=localhost
ORDER_SERVICE_GRPC_PORT=50051
ORDER_SERVICE_GRPC_TIMEOUT=30s

# Admin Service gRPC
ADMIN_SERVICE_GRPC_HOST=localhost
ADMIN_SERVICE_GRPC_PORT=50052
ADMIN_SERVICE_GRPC_TIMEOUT=5s

# Event Streams (Published)
STREAM_SEARCH_REQUESTED=stream.location.search
STREAM_INIT_REQUESTED=stream.uois.init_requested
STREAM_CONFIRM_REQUESTED=stream.uois.confirm_requested

# Event Streams (Consumed)
STREAM_QUOTE_COMPUTED=quote:computed
STREAM_QUOTE_CREATED=stream.uois.quote_created
STREAM_QUOTE_INVALIDATED=stream.uois.quote_invalidated
STREAM_ORDER_CONFIRMED=stream.uois.order_confirmed
STREAM_ORDER_CONFIRM_FAILED=stream.uois.order_confirm_failed
STREAM_CLIENT_EVENTS=stream:admin.client.events

# Consumer Group
CONSUMER_GROUP_NAME=uois-gateway-group
CONSUMER_ID=uois-gateway-1

# TTLs (in seconds) - NO HARDCODED VALUES
REQUEST_CONTEXT_TTL=3600
ORDER_MAPPING_TTL=2592000
IDEMPOTENCY_KEY_TTL=86400
ISSUE_STORAGE_TTL=2592000
CLIENT_CONFIG_CACHE_TTL=900
CLIENT_REGISTRY_CACHE_TTL=300

# Retry Configuration
CALLBACK_MAX_RETRIES=5
CALLBACK_RETRY_BACKOFF_1S=1s
CALLBACK_RETRY_BACKOFF_2S=2s
CALLBACK_RETRY_BACKOFF_4S=4s
CALLBACK_RETRY_BACKOFF_8S=8s
CALLBACK_RETRY_BACKOFF_16S=16s
ORDER_SERVICE_MAX_RETRIES=3
ADMIN_SERVICE_MAX_RETRIES=3
EVENT_PUBLISH_MAX_RETRIES=3

# TTL-Aware Defaults for ONDC Flows
# ONDC Request TTL: PT30S (30 seconds) - callback delivery deadline
# ONDC Quote TTL: PT15M (15 minutes) - quote validity period
# Formula: Total retry duration = sum(CALLBACK_RETRY_BACKOFF_*) <= 30 seconds
# Example: 1s + 2s + 4s + 8s + 16s = 31s (exceeds limit, adjust last retry to 15s)
# Recommended: 1s + 2s + 4s + 8s + 15s = 30s (within ONDC Request TTL)
ONDC_REQUEST_TTL_SECONDS=30
ONDC_QUOTE_TTL_SECONDS=900

# ONDC Configuration
ONDC_NETWORK_REGISTRY_URL=https://registry.ondc.org
ONDC_PRIVATE_KEY_PATH=/etc/uois/ondc_private_key.pem
ONDC_PUBLIC_KEY_PATH=/etc/uois/ondc_public_key.pem
ONDC_TIMESTAMP_WINDOW=300

# Zendesk Helpdesk Configuration
ZENDESK_API_URL=https://helpdesk.example.com/api
ZENDESK_API_EMAIL=
ZENDESK_API_TOKEN=
ZENDESK_WEBHOOK_SECRET=

# Logging
LOG_LEVEL=info
LOG_ENCODING=json

# Distributed Tracing
TRACING_ENABLED=true
TRACING_SAMPLE_RATE=0.1
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REDIS_KEY_PREFIX=rate_limit:uois
